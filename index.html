<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplicativo Financeiro</title>
    
    <!-- Tailwind CSS (para o estilo) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts (para a fonte Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Estilos embutidos (anteriormente em style.css) -->
    <style>
        /* Define a fonte padrão e um fundo suave para a página */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Cor cinza claro do Tailwind */
        }

        /* Animação para a entrada do modal */
        @keyframes modal-in {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .animate-modal-in {
            animation: modal-in 0.3s ease-out forwards;
        }

        /* Estilos para a biblioteca de gráficos (prose) */
        .prose {
            color: #374151;
        }

        .prose h1, .prose h2, .prose h3 {
            color: #111827;
            font-weight: 700;
        }

        .prose strong {
            color: #111827;
            font-weight: 600;
        }

        .prose ul > li::before {
            background-color: #4f46e5;
        }
    </style>
</head>
<body>
    <!-- O React vai montar seu aplicativo dentro desta div -->
    <noscript>Você precisa habilitar o JavaScript para rodar este aplicativo.</noscript>
    <div id="root"></div>

    <!-- Scripts do React -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    
    <!-- Scripts do Firebase (IMPORTANTE: use a versão 9 ou superior para a sintaxe modular) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";
        import { getFirestore, collection, doc, addDoc, updateDoc, onSnapshot, deleteDoc, writeBatch } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js";

        // **PASSO IMPORTANTE**: Cole sua configuração do Firebase aqui
        const firebaseConfig = {
            apiKey: "SUA_API_KEY",
            authDomain: "SEU_AUTH_DOMAIN",
            projectId: "SEU_PROJECT_ID",
            storageBucket: "SEU_STORAGE_BUCKET",
            messagingSenderId: "SEU_MESSAGING_SENDER_ID",
            appId: "SEU_APP_ID"
        };

        // Disponibiliza as funções do Firebase para o script do aplicativo
        window.firebase = {
            initializeApp,
            getAuth,
            signInAnonymously,
            onAuthStateChanged,
            signInWithCustomToken,
            getFirestore,
            collection,
            doc,
            addDoc,
            updateDoc,
            onSnapshot,
            deleteDoc,
            writeBatch,
            firebaseConfig
        };
    </script>
    
    <!-- Scripts de bibliotecas externas (Recharts e Lucide Icons) -->
    <script src="https://unpkg.com/recharts@2.1.9/umd/Recharts.min.js"></script>
    <script src="https://unpkg.com/lucide-react@0.263.1/dist/lucide-react.js"></script>
    
    <!-- Babel para transpilar JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Seu arquivo de script principal (anteriormente em script.js) -->
    <script type="text/babel" data-type="module">
        const { useState, useEffect, useMemo } = React;

        // --- INÍCIO: Configuração do Firebase ---
        const {
            initializeApp, getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken,
            getFirestore, collection, doc, addDoc, updateDoc, onSnapshot, deleteDoc, writeBatch,
            firebaseConfig
        } = window.firebase;
        
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = firebaseConfig.appId || 'default-app-id';
        // --- FIM: Configuração do Firebase ---

        // --- Funções Utilitárias ---
        const formatCurrency = (value) => (value || 0).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        const formatDate = (dateString) => new Date(dateString + 'T00:00:00').toLocaleDateString('pt-BR');

        // --- Componentes de UI ---
        const { AlertCircle, ArrowLeft, Briefcase, CheckCircle, Copy, DollarSign, Edit, FileText, Home, PlusCircle, Sparkles, Trash2, TrendingUp, Users, X } = lucide;
        const { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } = Recharts;

        const StatCard = ({ title, value, icon, color }) => (
            <div className="bg-white p-6 rounded-2xl shadow-lg border border-gray-200 flex flex-col justify-between hover:shadow-xl transition-shadow duration-300">
                <div className="flex items-center justify-between mb-4">
                    <h3 className="text-lg font-semibold text-gray-600">{title}</h3>
                    <div className={`p-2 rounded-full ${color}`}>{icon}</div>
                </div>
                <p className="text-4xl font-bold text-gray-800">{value}</p>
            </div>
        );

        const Modal = ({ isOpen, onClose, title, children, maxWidth = 'max-w-2xl' }) => {
            if (!isOpen) return null;
            return ReactDOM.createPortal(
                <div className="fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4">
                    <div className={`bg-gray-50 rounded-2xl shadow-2xl w-full ${maxWidth} max-h-[90vh] overflow-y-auto p-8 relative transform transition-all duration-300 scale-95 animate-modal-in`}>
                        <h2 className="text-2xl font-bold text-gray-800 mb-6">{title}</h2>
                        <button onClick={onClose} className="absolute top-6 right-6 text-gray-500 hover:text-gray-800 transition-colors">
                            <X size={24} />
                        </button>
                        {children}
                    </div>
                </div>,
                document.body
            );
        };

        const Spinner = () => <div className="animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-blue-500"></div>;
        
        // ... (Todos os outros componentes React do aplicativo vão aqui)
        // O código abaixo é uma cópia exata da lógica do aplicativo que já criamos.
        
        const FinanceForm = ({ onSubmit, onCancel, initialData = {}, type, clients = [] }) => {
            const [formData, setFormData] = useState({
                clientId: initialData.clientId || (clients.length > 0 ? clients[0].id : ''),
                name: initialData.name || '',
                description: initialData.description || '',
                amount: initialData.amount || '',
                dueDate: initialData.dueDate || '',
                isRecurring: initialData.isRecurring || false,
                periodicity: initialData.periodicity || 'Mensal',
                installments: initialData.installments || 12,
            });

            const handleChange = (e) => {
                const { name, value, type, checked } = e.target;
                setFormData(prev => ({ ...prev, [name]: type === 'checkbox' ? checked : value }));
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                onSubmit({ ...formData, amount: parseFloat(formData.amount), installments: parseInt(formData.installments) });
            };

            const isReceivable = type === 'receivable';
            const descriptionLabel = isReceivable ? 'Descrição do Serviço/Produto' : 'Descrição da Despesa';

            return (
                <form onSubmit={handleSubmit} className="space-y-6">
                    {isReceivable ? (
                         <div>
                            <label htmlFor="clientId" className="block text-sm font-medium text-gray-700 mb-1">Cliente</label>
                            <select name="clientId" id="clientId" value={formData.clientId} onChange={handleChange} required className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                 {clients.length === 0 && <option disabled>Nenhum cliente cadastrado</option>}
                                 {clients.map(client => (
                                    <option key={client.id} value={client.id}>{client.razaoSocial}</option>
                                ))}
                            </select>
                        </div>
                    ) : (
                        <div>
                            <label htmlFor="name" className="block text-sm font-medium text-gray-700 mb-1">Nome do Fornecedor</label>
                            <input type="text" name="name" id="name" value={formData.name} onChange={handleChange} required className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"/>
                        </div>
                    )}
                    <div>
                        <label htmlFor="description" className="block text-sm font-medium text-gray-700 mb-1">{descriptionLabel}</label>
                        <input type="text" name="description" id="description" value={formData.description} onChange={handleChange} required className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"/>
                    </div>
                    <div className="grid grid-cols-2 gap-4">
                        <div>
                            <label htmlFor="amount" className="block text-sm font-medium text-gray-700 mb-1">Valor (R$)</label>
                            <input type="number" name="amount" id="amount" value={formData.amount} onChange={handleChange} required min="0.01" step="0.01" className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"/>
                        </div>
                        <div>
                            <label htmlFor="dueDate" className="block text-sm font-medium text-gray-700 mb-1">Data de Vencimento</label>
                            <input type="date" name="dueDate" id="dueDate" value={formData.dueDate} onChange={handleChange} required className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"/>
                        </div>
                    </div>
                    <div className="pt-4 border-t">
                        <label className="flex items-center space-x-3 cursor-pointer">
                            <input type="checkbox" name="isRecurring" checked={formData.isRecurring} onChange={handleChange} className="h-5 w-5 rounded text-blue-600 focus:ring-blue-500"/>
                            <span className="text-gray-700 font-medium">Lançamento Recorrente</span>
                        </label>
                    </div>
                    {formData.isRecurring && (
                        <div className="grid grid-cols-2 gap-4 bg-gray-100 p-4 rounded-lg">
                            <div>
                                <label htmlFor="periodicity" className="block text-sm font-medium text-gray-700 mb-1">Periodicidade</label>
                                <select name="periodicity" id="periodicity" value={formData.periodicity} onChange={handleChange} className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                    <option>Mensal</option>
                                    <option>Trimestral</option>
                                    <option>Semestral</option>
                                    <option>Anual</option>
                                </select>
                            </div>
                             <div>
                                <label htmlFor="installments" className="block text-sm font-medium text-gray-700 mb-1">Nº de Parcelas</label>
                                <input type="number" name="installments" id="installments" value={formData.installments} onChange={handleChange} required min="1" className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"/>
                            </div>
                        </div>
                    )}
                    <div className="flex justify-end space-x-4 pt-4">
                        <button type="button" onClick={onCancel} className="px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-semibold">Cancelar</button>
                        <button type="submit" className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold shadow-md">Salvar</button>
                    </div>
                </form>
            );
        };

        const ClientForm = ({ onSubmit, onCancel, initialData = {} }) => {
            const [formData, setFormData] = useState({
                razaoSocial: initialData.razaoSocial || '',
                cnpj: initialData.cnpj || '',
                endereco: initialData.endereco || '',
                tributacao: initialData.tributacao || 'Simples Nacional',
                tipoContrato: initialData.tipoContrato || 'Contabilidade',
                honorarioMensal: initialData.honorarioMensal || '',
                dataEntrada: initialData.dataEntrada || '',
                email: initialData.email || '',
                whatsapp: initialData.whatsapp || '',
            });

            const handleChange = (e) => {
                const { name, value } = e.target;
                setFormData(prev => ({ ...prev, [name]: value }));
            };
            
            const handleSubmit = (e) => {
                e.preventDefault();
                onSubmit({...formData, honorarioMensal: parseFloat(formData.honorarioMensal)});
            };

            return (
                <form onSubmit={handleSubmit} className="space-y-6">
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label htmlFor="razaoSocial" className="block text-sm font-medium text-gray-700 mb-1">Razão Social</label>
                            <input type="text" name="razaoSocial" id="razaoSocial" value={formData.razaoSocial} onChange={handleChange} required className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"/>
                        </div>
                        <div>
                            <label htmlFor="cnpj" className="block text-sm font-medium text-gray-700 mb-1">CNPJ</label>
                            <input type="text" name="cnpj" id="cnpj" value={formData.cnpj} onChange={handleChange} required className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"/>
                        </div>
                    </div>
                    <div>
                        <label htmlFor="endereco" className="block text-sm font-medium text-gray-700 mb-1">Endereço</label>
                        <input type="text" name="endereco" id="endereco" value={formData.endereco} onChange={handleChange} className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"/>
                    </div>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label htmlFor="tributacao" className="block text-sm font-medium text-gray-700 mb-1">Regime Tributário</label>
                            <select name="tributacao" id="tributacao" value={formData.tributacao} onChange={handleChange} className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <option>Simples Nacional</option>
                                <option>Lucro Presumido</option>
                                <option>Lucro Real</option>
                            </select>
                        </div>
                        <div>
                            <label htmlFor="tipoContrato" className="block text-sm font-medium text-gray-700 mb-1">Tipo de Contrato</label>
                            <select name="tipoContrato" id="tipoContrato" value={formData.tipoContrato} onChange={handleChange} className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <option>Contabilidade</option>
                                <option>Serviço Extra</option>
                            </select>
                        </div>
                    </div>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label htmlFor="honorarioMensal" className="block text-sm font-medium text-gray-700 mb-1">Honorário Mensal (R$)</label>
                            <input type="number" name="honorarioMensal" id="honorarioMensal" value={formData.honorarioMensal} onChange={handleChange} required min="0.01" step="0.01" className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"/>
                        </div>
                         <div>
                            <label htmlFor="dataEntrada" className="block text-sm font-medium text-gray-700 mb-1">Data de Entrada</label>
                            <input type="date" name="dataEntrada" id="dataEntrada" value={formData.dataEntrada} onChange={handleChange} required className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"/>
                        </div>
                    </div>
                     <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label htmlFor="email" className="block text-sm font-medium text-gray-700 mb-1">E-mail</label>
                            <input type="email" name="email" id="email" value={formData.email} onChange={handleChange} className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"/>
                        </div>
                        <div>
                            <label htmlFor="whatsapp" className="block text-sm font-medium text-gray-700 mb-1">WhatsApp</label>
                            <input type="tel" name="whatsapp" id="whatsapp" value={formData.whatsapp} onChange={handleChange} placeholder="(XX) XXXXX-XXXX" className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"/>
                        </div>
                    </div>
                    <div className="flex justify-end space-x-4 pt-4">
                        <button type="button" onClick={onCancel} className="px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-semibold">Cancelar</button>
                        <button type="submit" className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold shadow-md">Salvar Cliente</button>
                    </div>
                </form>
            );
        };
        
        const Dashboard = ({ receivables, payables, onUpdateStatus }) => {
            const stats = useMemo(() => {
                const today = new Date();
                today.setHours(0,0,0,0);

                const receivablesWithStatus = receivables.map(r => {
                    const dueDate = new Date(r.dueDate + 'T00:00:00');
                    if (r.status === 'Pendente' && dueDate < today) {
                        return { ...r, status: 'Atrasado' };
                    }
                    return r;
                });

                const thirtyDaysAgo = new Date();
                thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);

                const receivedLast30d = receivables
                    .filter(r => r.status === 'Pago' && new Date(r.dueDate + 'T00:00:00') >= thirtyDaysAgo)
                    .reduce((sum, r) => sum + r.amount, 0);

                return {
                    totalReceber: receivablesWithStatus.filter(r => ['Pendente', 'Atrasado'].includes(r.status)).reduce((sum, r) => sum + r.amount, 0),
                    totalRecebido30d: receivedLast30d,
                    totalPagar: payables.filter(p => p.status === 'A Pagar').reduce((sum, p) => sum + p.amount, 0),
                    atrasados: receivablesWithStatus.filter(r => r.status === 'Atrasado').sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate)),
                };
            }, [receivables, payables]);

            const getDaysOverdue = (dueDate) => {
                const diffTime = new Date() - new Date(dueDate + 'T00:00:00');
                return Math.max(1, Math.ceil(diffTime / (1000 * 60 * 60 * 24)));
            };

            return (
                <div className="space-y-8">
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <StatCard title="A Receber (Pendente)" value={formatCurrency(stats.totalReceber)} icon={<DollarSign className="text-yellow-600"/>} color="bg-yellow-100" />
                        <StatCard title="Recebido (Últimos 30d)" value={formatCurrency(stats.totalRecebido30d)} icon={<CheckCircle className="text-green-600"/>} color="bg-green-100" />
                        <StatCard title="A Pagar (Pendente)" value={formatCurrency(stats.totalPagar)} icon={<TrendingUp className="text-red-600 transform -scale-y-100"/>} color="bg-red-100" />
                    </div>
                    <div className="bg-white p-6 rounded-2xl shadow-lg border border-gray-200">
                        <div className="flex items-center mb-4">
                            <AlertCircle className="text-red-500 mr-3 h-6 w-6"/>
                            <h3 className="text-xl font-bold text-gray-800">Régua de Cobrança (Atrasados)</h3>
                        </div>
                        {stats.atrasados.length > 0 ? (
                            <div className="overflow-x-auto">
                                <table className="w-full text-left">
                                    <thead>
                                        <tr className="border-b-2 border-gray-200">
                                            <th className="p-3 text-sm font-semibold text-gray-600">Cliente</th>
                                            <th className="p-3 text-sm font-semibold text-gray-600">Valor</th>
                                            <th className="p-3 text-sm font-semibold text-gray-600">Dias Atrasado</th>
                                            <th className="p-3 text-sm font-semibold text-gray-600 text-center">Ação</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {stats.atrasados.map(item => (
                                            <tr key={item.id} className="border-b border-gray-100 hover:bg-red-50">
                                                <td className="p-3 font-medium text-gray-700">{item.name}</td>
                                                <td className="p-3 text-gray-600">{formatCurrency(item.amount)}</td>
                                                <td className="p-3 text-red-600 font-semibold">{getDaysOverdue(item.dueDate)}</td>
                                                <td className="p-3 text-center">
                                                    <button onClick={() => onUpdateStatus('receivables', item.id, 'Pago')} className="px-4 py-1 bg-green-500 text-white text-sm rounded-full hover:bg-green-600">Marcar como Pago</button>
                                                </td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        ) : (
                            <p className="text-center text-gray-500 py-4">Nenhuma cobrança atrasada. Ótimo trabalho!</p>
                        )}
                    </div>
                </div>
            );
        };
        
        const DataTablePage = ({ title, data, columns, onAdd, onUpdateStatus, onDelete, onEdit, type }) => {
            const getStatusChip = (item) => {
                const today = new Date();
                today.setHours(0,0,0,0);
                const dueDate = new Date(item.dueDate + 'T00:00:00');
                let effectiveStatus = item.status;
                if (type === 'receivable' && item.status === 'Pendente' && dueDate < today) {
                    effectiveStatus = 'Atrasado';
                }
                
                switch (effectiveStatus) {
                    case 'Pago': return <span className="px-3 py-1 text-xs font-semibold text-green-800 bg-green-200 rounded-full">Pago</span>;
                    case 'Pendente': return <span className="px-3 py-1 text-xs font-semibold text-yellow-800 bg-yellow-200 rounded-full">Pendente</span>;
                    case 'A Pagar': return <span className="px-3 py-1 text-xs font-semibold text-orange-800 bg-orange-200 rounded-full">A Pagar</span>;
                    case 'Atrasado': return <span className="px-3 py-1 text-xs font-semibold text-red-800 bg-red-200 rounded-full">Atrasado</span>;
                    default: return <span className="px-3 py-1 text-xs font-semibold text-gray-800 bg-gray-200 rounded-full">{item.status}</span>;
                }
            };

            return (
                <div className="bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-gray-200">
                    <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                        <h2 className="text-2xl font-bold text-gray-800 mb-4 sm:mb-0">{title}</h2>
                        <button onClick={onAdd} className="flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold shadow-md">
                            <PlusCircle className="mr-2 h-5 w-5" /> Adicionar Novo
                        </button>
                    </div>
                    <div className="overflow-x-auto">
                        <table className="w-full min-w-[600px]">
                            <thead>
                                <tr className="border-b-2 border-gray-200">
                                    {columns.map(col => <th key={col.key} className="p-3 text-left text-sm font-semibold text-gray-600">{col.label}</th>)}
                                    <th className="p-3 text-left text-sm font-semibold text-gray-600">Status</th>
                                    <th className="p-3 text-center text-sm font-semibold text-gray-600">Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                {data.length > 0 ? data.map(item => (
                                    <tr key={item.id} className="border-b border-gray-100 hover:bg-gray-50">
                                        {columns.map(col => (
                                            <td key={col.key} className="p-3 text-gray-700">
                                                {col.key === 'amount' ? formatCurrency(item[col.key]) : col.key === 'dueDate' ? formatDate(item[col.key]) : item[col.key]}
                                            </td>
                                        ))}
                                        <td className="p-3">{getStatusChip(item)}</td>
                                        <td className="p-3">
                                            <div className="flex justify-center items-center space-x-2">
                                                {(item.status === 'Pendente' || item.status === 'A Pagar' || (type === 'receivable' && item.status !== 'Pago')) && (
                                                    <button onClick={() => onUpdateStatus(type === 'receivable' ? 'receivables' : 'payables', item.id, 'Pago')} className="p-2 text-green-600 hover:bg-green-100 rounded-full" title="Marcar como Pago"><CheckCircle size={20} /></button>
                                                )}
                                                <button onClick={() => onEdit(item)} className="p-2 text-blue-600 hover:bg-blue-100 rounded-full" title="Editar"><Edit size={20} /></button>
                                                <button onClick={() => onDelete(type === 'receivable' ? 'receivables' : 'payables', item.id)} className="p-2 text-red-600 hover:bg-red-100 rounded-full" title="Excluir"><Trash2 size={20} /></button>
                                            </div>
                                        </td>
                                    </tr>
                                )) : (
                                    <tr><td colSpan={columns.length + 2} className="text-center p-6 text-gray-500">Nenhum item encontrado.</td></tr>
                                )}
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        };
        
        const ClientsPage = ({ clients, onAdd, onEdit, onDelete, onGenerateCharge }) => {
            const columns = [
                { key: 'razaoSocial', label: 'Razão Social' },
                { key: 'cnpj', label: 'CNPJ' },
                { key: 'tipoContrato', label: 'Contrato' },
                { key: 'honorarioMensal', label: 'Honorário' },
            ];
            return (
                <div className="bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-gray-200">
                    <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                        <h2 className="text-2xl font-bold text-gray-800 mb-4 sm:mb-0">Cadastro de Clientes</h2>
                        <button onClick={onAdd} className="flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold shadow-md">
                            <PlusCircle className="mr-2 h-5 w-5" /> Adicionar Cliente
                        </button>
                    </div>
                    <div className="overflow-x-auto">
                        <table className="w-full min-w-[600px]">
                            <thead>
                                <tr className="border-b-2 border-gray-200">
                                    {columns.map(col => <th key={col.key} className="p-3 text-left text-sm font-semibold text-gray-600">{col.label}</th>)}
                                    <th className="p-3 text-center text-sm font-semibold text-gray-600">Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                {clients.length > 0 ? clients.map(client => (
                                    <tr key={client.id} className="border-b border-gray-100 hover:bg-gray-50">
                                        {columns.map(col => <td key={col.key} className="p-3 text-gray-700">{col.key === 'honorarioMensal' ? formatCurrency(client[col.key]) : client[col.key]}</td>)}
                                        <td className="p-3">
                                            <div className="flex justify-center items-center space-x-2">
                                                <button onClick={() => onGenerateCharge(client)} className="p-2 text-green-600 hover:bg-green-100 rounded-full" title="Gerar Cobrança"><DollarSign size={20} /></button>
                                                <button onClick={() => onEdit(client)} className="p-2 text-blue-600 hover:bg-blue-100 rounded-full" title="Editar"><Edit size={20} /></button>
                                                <button onClick={() => onDelete(client.id)} className="p-2 text-red-600 hover:bg-red-100 rounded-full" title="Excluir"><Trash2 size={20} /></button>
                                            </div>
                                        </td>
                                    </tr>
                                )) : (
                                    <tr><td colSpan={columns.length + 1} className="text-center p-6 text-gray-500">Nenhum cliente cadastrado.</td></tr>
                                )}
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        };
        
        const ReportsPage = ({ receivables, payables, onGenerateAiReport, aiReport, isAiReportLoading }) => {
            const reportData = useMemo(() => {
                const paidReceivables = receivables.filter(r => r.status === 'Pago');
                const paidPayables = payables.filter(p => p.status === 'Pago');

                const totalIncome = paidReceivables.reduce((sum, r) => sum + r.amount, 0);
                const totalExpenses = paidPayables.reduce((sum, p) => sum + p.amount, 0);
                const netBalance = totalIncome - totalExpenses;
                
                const monthlyData = {};
                [...paidReceivables, ...paidPayables].forEach(item => {
                    const month = new Date(item.dueDate + 'T00:00:00').toLocaleString('pt-BR', { month: 'short', year: '2-digit' });
                    if (!monthlyData[month]) {
                        monthlyData[month] = { name: month, Entradas: 0, Saídas: 0 };
                    }
                    if (item.status === 'Pago' && item.clientId) {
                        monthlyData[month].Entradas += item.amount;
                    } else if(item.status === 'Pago') {
                        monthlyData[month].Saídas += item.amount;
                    }
                });
                
                const chartData = Object.values(monthlyData).sort((a,b) => new Date('01 ' + a.name.replace(" de ",'/')) - new Date('01 ' + b.name.replace(" de ",'/')));
                return { totalIncome, totalExpenses, netBalance, chartData };
            }, [receivables, payables]);

            return (
                <div className="space-y-8">
                    <div className="bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-gray-200">
                        <h2 className="text-2xl font-bold text-gray-800 mb-6">Relatório Financeiro Geral</h2>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
                            <div className="p-4 bg-green-50 rounded-lg"><p className="text-sm text-green-700 font-semibold">Total de Entradas (Pago)</p><p className="text-2xl font-bold text-green-800">{formatCurrency(reportData.totalIncome)}</p></div>
                            <div className="p-4 bg-red-50 rounded-lg"><p className="text-sm text-red-700 font-semibold">Total de Saídas (Pago)</p><p className="text-2xl font-bold text-red-800">{formatCurrency(reportData.totalExpenses)}</p></div>
                            <div className={`p-4 rounded-lg ${reportData.netBalance >= 0 ? 'bg-blue-50' : 'bg-orange-50'}`}><p className={`text-sm font-semibold ${reportData.netBalance >= 0 ? 'text-blue-700' : 'text-orange-700'}`}>Saldo Líquido</p><p className={`text-2xl font-bold ${reportData.netBalance >= 0 ? 'text-blue-800' : 'text-orange-800'}`}>{formatCurrency(reportData.netBalance)}</p></div>
                        </div>
                    </div>
                    
                    <div className="bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-gray-200">
                        <h3 className="text-xl font-bold text-gray-800 mb-4">Fluxo de Caixa Mensal (Entradas vs. Saídas)</h3>
                        <div style={{ width: '100%', height: 400 }}>
                            <ResponsiveContainer>
                                <BarChart data={reportData.chartData} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>
                                    <CartesianGrid strokeDasharray="3 3" vertical={false} />
                                    <XAxis dataKey="name" />
                                    <YAxis tickFormatter={(value) => formatCurrency(value)} />
                                    <Tooltip formatter={(value) => formatCurrency(value)} />
                                    <Legend />
                                    <Bar dataKey="Entradas" fill="#22c55e" name="Entradas (Pago)" />
                                    <Bar dataKey="Saídas" fill="#ef4444" name="Saídas (Pago)" />
                                </BarChart>
                            </ResponsiveContainer>
                        </div>
                    </div>

                    <div className="bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-gray-200">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-xl font-bold text-gray-800">Análise Financeira com IA</h3>
                            <button onClick={() => onGenerateAiReport(reportData)} disabled={isAiReportLoading} className="flex items-center px-4 py-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-lg hover:from-purple-600 hover:to-indigo-700 font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed">
                                <Sparkles className="mr-2 h-5 w-5" /> {isAiReportLoading ? 'Analisando...' : '✨ Gerar Análise'}
                            </button>
                        </div>
                        {isAiReportLoading && <div className="flex justify-center p-8"><Spinner /></div>}
                        {aiReport && (
                            <div className="prose prose-blue max-w-none p-4 bg-gray-100 rounded-lg whitespace-pre-wrap">{aiReport}</div>
                        )}
                    </div>
                </div>
            );
        };
        
        const App = () => {
            const [userId, setUserId] = useState(null);
            const [clients, setClients] = useState([]);
            const [receivables, setReceivables] = useState([]);
            const [payables, setPayables] = useState([]);
            const [currentPage, setCurrentPage] = useState('dashboard');
            const [isLoading, setIsLoading] = useState(true);
            
            const [modalState, setModalState] = useState({ type: null, data: null, isOpen: false });
            const [messageModal, setMessageModal] = useState({ isOpen: false, text: '' });
            const [toneModal, setToneModal] = useState({ isOpen: false, data: null });

            const [isAiLoading, setIsAiLoading] = useState(false);
            const [aiReport, setAiReport] = useState('');
            const [isAiReportLoading, setIsAiReportLoading] = useState(false);

            useEffect(() => {
                onAuthStateChanged(auth, async (user) => {
                    if (user) {
                        setUserId(user.uid);
                    } else {
                        try {
                            const token = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
                            if (token) await signInWithCustomToken(auth, token);
                            else await signInAnonymously(auth);
                        } catch (error) { console.error("Authentication error:", error); }
                    }
                });
            }, []);

            useEffect(() => {
                if (!userId) return;
                setIsLoading(true);
                const collections = { clients: setClients, receivables: setReceivables, payables: setPayables };
                const unsubscribers = Object.entries(collections).map(([name, setter]) => 
                    onSnapshot(collection(db, 'artifacts', appId, 'users', userId, name), (snapshot) => {
                        setter(snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));
                        setIsLoading(false);
                    }, (err) => { console.error(`Error fetching ${name}:`, err); setIsLoading(false); })
                );
                return () => unsubscribers.forEach(unsub => unsub());
            }, [userId]);

            const openModal = (type, data = null) => setModalState({ type, data, isOpen: true });
            const closeModal = () => setModalState({ isOpen: false, type: null, data: null });

            const handleSave = async (data) => {
                if (!userId) return;
                const { type, data: existingData } = modalState;
                const collectionName = type === 'client' ? 'clients' : (type === 'receivable' ? 'receivables' : 'payables');
                
                const processSave = async (payloadData) => {
                    if (existingData?.id) {
                        await updateDoc(doc(db, 'artifacts', appId, 'users', userId, collectionName, existingData.id), payloadData);
                    } else {
                        await addDoc(collection(db, 'artifacts', appId, 'users', userId, collectionName), payloadData);
                    }
                };

                if (data.isRecurring) {
                    const batch = writeBatch(db);
                    const { periodicity, installments, ...basePayload } = data;
                    
                    let clientName = '';
                    if (type === 'receivable') {
                        const client = clients.find(c => c.id === basePayload.clientId);
                        clientName = client ? client.razaoSocial : 'Cliente';
                    }

                    const originalDueDate = new Date(basePayload.dueDate + 'T00:00:00');

                    for (let i = 0; i < installments; i++) {
                        const newDueDate = new Date(originalDueDate);
                        if (periodicity === 'Mensal') newDueDate.setMonth(newDueDate.getMonth() + i);
                        else if (periodicity === 'Trimestral') newDueDate.setMonth(newDueDate.getMonth() + i * 3);
                        else if (periodicity === 'Semestral') newDueDate.setMonth(newDueDate.getMonth() + i * 6);
                        else if (periodicity === 'Anual') newDueDate.setFullYear(newDueDate.getFullYear() + i);
                        
                        const docRef = doc(collection(db, 'artifacts', appId, 'users', userId, collectionName));
                        batch.set(docRef, {
                            ...basePayload,
                            name: type === 'receivable' ? clientName : basePayload.name,
                            amount: parseFloat(basePayload.amount),
                            status: collectionName === 'receivables' ? 'Pendente' : 'A Pagar',
                            createdAt: new Date().toISOString(),
                            dueDate: newDueDate.toISOString().split('T')[0],
                            description: `${basePayload.description} (${i + 1}/${installments})`,
                        });
                    }
                    await batch.commit();
                } else {
                    const payload = { ...data, createdAt: new Date().toISOString() };
                     if (type === 'receivable') {
                        const client = clients.find(c => c.id === data.clientId);
                        payload.name = client ? client.razaoSocial : 'Cliente não encontrado';
                        payload.status = 'Pendente';
                    } else if (type === 'payable') {
                        payload.status = 'A Pagar';
                    }
                    await processSave(payload);
                }
                closeModal();
            };

            const handleDelete = async (collectionName, id) => {
                if (!userId || !window.confirm("Tem certeza? Esta ação não pode ser desfeita.")) return;
                await deleteDoc(doc(db, 'artifacts', appId, 'users', userId, collectionName, id));
            };

            const handleUpdateStatus = async (collectionName, id, status) => {
                if (!userId) return;
                await updateDoc(doc(db, 'artifacts', appId, 'users', userId, collectionName, id), { status });
            };
            
            const callGeminiApi = async (prompt) => {
                const apiKey = firebaseConfig.apiKey;
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                const payload = { contents: [{ role: "user", parts: [{ text: prompt }] }] };

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) {
                        const errorBody = await response.text();
                        console.error("API Error Body:", errorBody);
                        throw new Error(`API error: ${response.statusText}`);
                    }
                    const result = await response.json();
                    return result?.candidates?.[0]?.content?.parts?.[0]?.text || "Não foi possível gerar uma resposta.";
                } catch (error) {
                    console.error("Erro ao chamar a API Gemini:", error);
                    alert("Ocorreu um erro ao contatar a IA. Verifique se a chave de API do Gemini está configurada corretamente no seu projeto Firebase e se a API está ativada.");
                    return "Ocorreu um erro ao contatar a IA. Tente novamente.";
                }
            };

            const handleGenerateAiChargeMessage = async (tone) => {
                const { client, charge } = toneModal.data;
                setToneModal({ isOpen: false, data: null });
                setIsAiLoading(true);
                
                const prompt = `Aja como um assistente financeiro de um escritório de contabilidade. Escreva uma mensagem de cobrança para WhatsApp para o cliente ${client.razaoSocial}. O valor é de ${formatCurrency(charge.amount)} com vencimento em ${formatDate(charge.dueDate)}. O tom da mensagem deve ser: ${tone}. Seja breve e profissional. Inclua o contato de e-mail (${client.email}) e WhatsApp (${client.whatsapp}) para dúvidas.`;

                const aiMessage = await callGeminiApi(prompt);
                setMessageModal({ isOpen: true, text: aiMessage });
                setIsAiLoading(false);
            };

            const handleGenerateAiReport = async (reportData) => {
                setIsAiReportLoading(true);
                setAiReport('');
                
                const prompt = `Você é um consultor financeiro. Analise os seguintes dados de um pequeno escritório:
                - Total de Entradas (Pago): ${formatCurrency(reportData.totalIncome)}
                - Total de Saídas (Pago): ${formatCurrency(reportData.totalExpenses)}
                - Saldo Líquido: ${formatCurrency(reportData.netBalance)}
                - Dados mensais (Entradas vs Saídas): ${JSON.stringify(reportData.chartData)}

                Forneça uma análise curta e objetiva em 3 seções:
                1. **Resumo Geral:** Um parágrafo resumindo a saúde financeira do período.
                2. **Pontos de Atenção:** 2 ou 3 pontos em formato de lista (bullet points) sobre o que precisa de atenção (ex: mês com alta despesa, saldo negativo).
                3. **Sugestões:** 2 ou 3 sugestões práticas em formato de lista (bullet points) para melhorar a gestão financeira.
                
                Use um tom profissional, mas encorajador. Formate a resposta para fácil leitura.`;

                const analysis = await callGeminiApi(prompt);
                setAiReport(analysis);
                setIsAiReportLoading(false);
            };

            const handleGenerateCharge = (client) => {
                openModal('charge', client);
            };

            const handleSaveChargeAndOpenToneModal = async (chargeData) => {
                const { client, ...rest } = chargeData;
                const payload = {
                    name: client.razaoSocial,
                    clientId: client.id,
                    description: `Honorários - ${client.tipoContrato}`,
                    ...rest,
                    status: 'Pendente',
                    createdAt: new Date().toISOString(),
                };
                const docRef = await addDoc(collection(db, 'artifacts', appId, 'users', userId, 'receivables'), payload);
                closeModal();
                setToneModal({ isOpen: true, data: { client, charge: { id: docRef.id, ...payload } } });
            };
            
            const copyToClipboard = (text) => {
                navigator.clipboard.writeText(text).then(() => alert('Texto copiado para a área de transferência!'));
            };

            const renderPage = () => {
                if (isLoading) return <div className="flex justify-center items-center h-64"><Spinner/></div>;
                switch (currentPage) {
                    case 'dashboard': return <Dashboard receivables={receivables} payables={payables} onUpdateStatus={handleUpdateStatus} />;
                    case 'clients': return <ClientsPage clients={clients} onAdd={() => openModal('client')} onEdit={(client) => openModal('client', client)} onDelete={(id) => handleDelete('clients', id)} onGenerateCharge={handleGenerateCharge} />;
                    case 'receivables': return <DataTablePage title="Contas a Receber" data={receivables} columns={[{ key: 'name', label: 'Cliente' }, { key: 'description', label: 'Descrição' }, { key: 'amount', label: 'Valor' }, { key: 'dueDate', label: 'Vencimento' }]} onAdd={() => openModal('receivable')} onUpdateStatus={handleUpdateStatus} onDelete={(collectionName, id) => handleDelete(collectionName, id)} onEdit={(item) => openModal('receivable', item)} type="receivable" />;
                    case 'payables': return <DataTablePage title="Contas a Pagar" data={payables} columns={[{ key: 'name', label: 'Fornecedor' }, { key: 'description', label: 'Descrição' }, { key: 'amount', label: 'Valor' }, { key: 'dueDate', label: 'Vencimento' }]} onAdd={() => openModal('payable')} onUpdateStatus={handleUpdateStatus} onDelete={(collectionName, id) => handleDelete(collectionName, id)} onEdit={(item) => openModal('payable', item)} type="payable" />;
                    case 'reports': return <ReportsPage receivables={receivables} payables={payables} onGenerateAiReport={handleGenerateAiReport} aiReport={aiReport} isAiReportLoading={isAiReportLoading} />;
                    default: return <div>Página não encontrada</div>;
                }
            };

            const NavItem = ({ page, icon, label }) => (
                <button onClick={() => setCurrentPage(page)} className={`flex items-center w-full text-left px-4 py-3 rounded-lg transition-colors ${currentPage === page ? 'bg-blue-600 text-white shadow-md' : 'text-gray-600 hover:bg-gray-200'}`}>
                    {icon} <span className="ml-4 font-medium">{label}</span>
                </button>
            );

            return (
                <div className="min-h-screen bg-gray-100 font-sans">
                    <div className="flex flex-col lg:flex-row">
                        <aside className="bg-white lg:w-64 lg:min-h-screen p-4 border-b lg:border-r">
                            <div className="flex items-center mb-8"><DollarSign className="h-8 w-8 text-blue-600" /><h1 className="ml-3 text-2xl font-bold">Financeiro</h1></div>
                            <nav className="space-y-2">
                                <NavItem page="dashboard" icon={<Home size={20} />} label="Dashboard" />
                                <NavItem page="clients" icon={<Briefcase size={20} />} label="Clientes" />
                                <NavItem page="receivables" icon={<Users size={20} />} label="A Receber" />
                                <NavItem page="payables" icon={<ArrowLeft size={20} />} label="A Pagar" />
                                <NavItem page="reports" icon={<FileText size={20} />} label="Relatórios" />
                            </nav>
                        </aside>
                        <main className="flex-1 p-4 sm:p-6 lg:p-10">{renderPage()}</main>
                    </div>
                    
                    <Modal isOpen={modalState.isOpen && modalState.type !== 'charge'} onClose={closeModal} title={
                        modalState.type === 'client' ? (modalState.data ? 'Editar Cliente' : 'Novo Cliente') :
                        modalState.type === 'receivable' ? (modalState.data ? 'Editar Conta a Receber' : 'Nova Conta a Receber') :
                        (modalState.data ? 'Editar Conta a Pagar' : 'Nova Conta a Pagar')
                    }>
                        {modalState.type === 'client' && <ClientForm onSubmit={handleSave} onCancel={closeModal} initialData={modalState.data || {}} />}
                        {(modalState.type === 'receivable' || modalState.type === 'payable') && <FinanceForm onSubmit={handleSave} onCancel={closeModal} initialData={modalState.data || {}} type={modalState.type} clients={modalState.type === 'receivable' ? clients : []} />}
                    </Modal>

                    <Modal isOpen={modalState.isOpen && modalState.type === 'charge'} onClose={closeModal} title={`Gerar Cobrança para ${modalState.data?.razaoSocial}`}>
                        <ChargeForm client={modalState.data} onSubmit={handleSaveChargeAndOpenToneModal} onCancel={closeModal} />
                    </Modal>

                    <Modal isOpen={toneModal.isOpen} onClose={() => setToneModal({isOpen: false, data: null})} title="✨ Escolha o Tom da Mensagem" maxWidth="max-w-md">
                        <ToneSelectionModal onSelectTone={handleGenerateAiChargeMessage} isLoading={isAiLoading} />
                    </Modal>

                    <Modal isOpen={messageModal.isOpen} onClose={() => setMessageModal({ isOpen: false, text: '' })} title="✨ Mensagem Gerada por IA">
                        <div className="space-y-4">
                            <p className="p-4 bg-gray-100 rounded-lg text-gray-700 whitespace-pre-wrap">{messageModal.text}</p>
                            <button onClick={() => copyToClipboard(messageModal.text)} className="w-full flex justify-center items-center px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold shadow-md">
                                <Copy className="mr-2 h-5 w-5" /> Copiar Texto
                            </button>
                        </div>
                    </Modal>
                </div>
            );
        };
        
        const ChargeForm = ({ client, onSubmit, onCancel }) => {
            const [chargeData, setChargeData] = useState({ amount: client?.honorarioMensal || '', dueDate: '' });
            const handleChange = (e) => setChargeData(prev => ({ ...prev, [e.target.name]: e.target.value }));
            const handleSubmit = (e) => {
                e.preventDefault();
                onSubmit({ ...chargeData, amount: parseFloat(chargeData.amount), client });
            };
            return (
                <form onSubmit={handleSubmit} className="space-y-6">
                    <div>
                        <label htmlFor="amount" className="block text-sm font-medium text-gray-700 mb-1">Valor da Cobrança (R$)</label>
                        <input type="number" name="amount" value={chargeData.amount} onChange={handleChange} required min="0.01" step="0.01" className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"/>
                    </div>
                    <div>
                        <label htmlFor="dueDate" className="block text-sm font-medium text-gray-700 mb-1">Data de Vencimento</label>
                        <input type="date" name="dueDate" value={chargeData.dueDate} onChange={handleChange} required className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"/>
                    </div>
                    <div className="flex justify-end space-x-4 pt-4">
                        <button type="button" onClick={onCancel} className="px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-semibold">Cancelar</button>
                        <button type="submit" className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold shadow-md">Gerar Mensagem com IA</button>
                    </div>
                </form>
            );
        };

        const ToneSelectionModal = ({ onSelectTone, isLoading }) => {
            const tones = [
                { key: 'amigável', label: 'Lembrete Amigável' },
                { key: 'formal', label: 'Aviso Formal' },
                { key: 'urgente', label: 'Última Notificação (Urgente)' },
            ];
            return (
                <div className="space-y-4">
                    <p className="text-gray-600">A IA irá gerar uma mensagem de cobrança personalizada com base no tom que você escolher.</p>
                    {isLoading ? (
                        <div className="flex justify-center items-center p-8"><Spinner /></div>
                    ) : (
                        <div className="grid grid-cols-1 gap-4">
                            {tones.map(tone => (
                                <button key={tone.key} onClick={() => onSelectTone(tone.key)} className="w-full text-left p-4 border rounded-lg hover:bg-gray-100 hover:border-blue-500 transition-all">
                                    <p className="font-semibold text-gray-800">{tone.label}</p>
                                </button>
                            ))}
                        </div>
                    )}
                </div>
            );
        };

        // Renderiza o componente principal na div 'root' do HTML
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>

</body>
</html>
